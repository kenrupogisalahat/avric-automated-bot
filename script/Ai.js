const gojo = process.env.GOOGLE_API_KEY; // ClÃ© API stockÃ©e en variable d'environnement const messie = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${gojo}`; const axios = require('axios'); // Importation explicite d'axios module.exports.config = { // ... (configuration inchangÃ©e) }; module.exports.run = async function ({ api, event }) { const body = event.body || ""; const triggerWords = ["ai", "davbot"]; const matched = triggerWords.some(word => body.toLowerCase().startsWith(word)); if (!matched) return; const question = body.replace(/^(ai|Davbot)/i, "").trim(); if (!question) { // ... (message inchangÃ©) } const predefinedResponses = [ // ... (rÃ©ponses inchangÃ©es) ]; const isCreationQuestion = /^(crÃ©Ã©|crÃ©ateur|origine|qui t'a crÃ©Ã©)/i.test(question); try { const corps = { contents: [{ role: "user", parts: [{ text: question }] }], systemInstruction: { role: "system", parts: [{ text: isCreationQuestion ? "RÃ©pondre avec une phrase alÃ©atoire parmi les suivantes :" : "" }] } }; const rÃ©ponse = await axios.post(messie, corps, { headers: { 'Content-Type': 'application/json' } }); const texte = rÃ©ponse.data?.candidates?.[0]?.content?.parts?.[0]?.text || "Aucune rÃ©ponse gÃ©nÃ©rÃ©e."; const finalResponse = isCreationQuestion ? predefinedResponses[Math.floor(Math.random() * predefinedResponses.length)] : texte; return api.sendMessage( `ğ‘«ğ’‚ğ’—ğ’ƒğ’ğ’• âœ°\n_______________________________\n${finalResponse}\n________________________`, event.threadID, event.messageID ); } catch (erreur) { console.error("Erreur Gemini API:", erreur); // Message d'erreur plus informatif return api.sendMessage( 'ğ‘«ğ’‚ğ’—ğ’ƒğ’ğ’• âœ°\n_______________________________\nUne erreur est survenue en contactant Gemini API.\nVeuillez rÃ©essayer plus tard.\n________________________', event.threadID, event.messageID ); } }; 
